#### Tomcat中为什么要使用自定义类加载器

一个Tomcat中可以部署多个应用，⽽每个应⽤中都存在很多类，并且各个应⽤中的类是独⽴的，全类 名是可以相同的，⽐如⼀个订单系统中可能存在com.zhouyu.User类，⼀个库存系统中可能也存在 com.zhouyu.User类，⼀个Tomcat，不管内部部署了多少应⽤，Tomcat启动之后就是⼀个Java进程， 也就是⼀个JVM，所以如果Tomcat中只存在⼀个类加载器，⽐如默认的AppClassLoader，那么就只能加载⼀个com.zhouyu.User类，这是有问题的，⽽在Tomcat中，会为部署的每个应⽤都⽣成⼀个类加载器实例，名字叫做WebAppClassLoader，这样Tomcat中每个应⽤就可以使⽤⾃⼰的类加载器去加载⾃⼰的类，从⽽达到应⽤之间的类隔离，不出现冲突。另外Tomcat还利⽤⾃定义加载器实现了热加载功能



#### Tomcat如何进行优化

对于Tomcat调优，可以从两个⽅⾯来进⾏调整：内存和线程。

⾸先启动Tomcat，实际上就是启动了⼀个JVM，所以可以按JVM调优的⽅式来进⾏调整，从⽽达到 Tomcat优化的⽬的。

另外Tomcat中设计了⼀些缓存区，⽐如appReadBufSize、bufferPoolSize等缓存区来提⾼吞吐量。 还可以调整Tomcat的线程，⽐如调整minSpareThreads参数来改变Tomcat空闲时的线程数，调整 maxThreads参数来设置Tomcat处理连接的最⼤线程数。 并且还可以调整IO模型，⽐如使⽤NIO、APR这种相⽐于BIO更加⾼效的IO模型



#### 浏览器发送一个请求到收到响应经理了哪些步骤

1. 浏览器解析用户输入的URL，⽣成⼀个HTTP格式的请求 
2. 先根据URL域名从本地hosts⽂件查找是否有映射IP，如果没有就将域名发送给电脑所配置的DNS进行域名解析，得到IP地址
3. 浏览器通过操作系统将请求通过四层⽹络协议发送出去
4. 途中可能会经过各种路由器、交换机，最终到达服务器
5. 服务器收到请求后，根据请求所指定的端⼝，将请求传递给绑定了该端⼝的应⽤程序，⽐如8080被tomcat占⽤了
6. tomcat接收到请求数据后，按照http协议的格式进⾏解析，解析得到所要访问的servlet
7. 然后servlet来处理这个请求，如果是SpringMVC中的DispatcherServlet，那么则会找到对应的 Controller中的⽅法，并执⾏该⽅法得到结果
8. Tomcat得到响应结果后封装成HTTP响应的格式，并再次通过⽹络发送给浏览器所在的服务器
9. 浏览器所在的服务器拿到结果后再传递给浏览器，浏览器则负责解析并渲染



#### 跨域请求是什么？有什么问题？怎么解决？

跨域是指浏览器在发起⽹络请求时，会检查该请求所对应的协议、域名、端⼝和当前⽹⻚是否⼀致，如 果不⼀致则浏览器会进⾏限制，⽐如在www.baidu.com的某个⽹⻚中，如果使⽤ajax去访问 www.jd.com是不⾏的，但是如果是img、iframe、script等标签的src属性去访问则是可以的，之所以浏 览器要做这层限制，是为了⽤户信息安全。但是如果开发者想要绕过这层限制也是可以的：

1. response添加header，⽐如resp.setHeader("Access-Control-Allow-Origin", "*");表示可以访问 所有⽹站，不受是否同源的限制
2. jsonp的⽅式，该技术底层就是基于script标签来实现的，因为script标签是可以跨域的
3. 后台⾃⼰控制，先访问同域名下的接⼝，然后在接⼝中再去使⽤HTTPClient等⼯具去调⽤⽬标接⼝
4. ⽹关，和第三种⽅式类似，都是交给后台服务来进⾏跨域访问