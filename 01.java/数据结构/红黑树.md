## 二叉查找树（BST）

特征：

- 左子树上所有结点的值小于或等于它的根节点的值
- 右子树上所有结点的值大于或等于它的根节点的值
- 左、右子树也分别是二叉排序树

![img](http://5b0988e595225.cdn.sohucs.com/images/20171102/202128cf82084e64a251b458f0ddcd9b.jpeg)

在查找数据的时候，二叉查找树遵循二分查找的思想，查找所需的最大次数等同于二叉查找树的高度。这样查找数据效率较高。

缺陷：如果按照8，9，12新建一个树，然后在擦汗如的时候依次插入：7，6，5，4，3，2，1，那么树会变为如下状态

![img](http://5b0988e595225.cdn.sohucs.com/images/20171102/3490195d7e3a405c97c34d391c71f09b.png)

这样的树就损失了二分查找的高效率



## 红黑树：

为了改进二叉查找树的缺陷，所以诞生了红黑树：

特征：

- 节点是红色或黑色。
- 根节点是黑色。
- 每个叶子节点都是黑色的空节点（NIL节点）。
- 每个红色节点的两个子节点都是黑色。(从每个叶子到根的所有路径上不能有两个连续的红色节点)
- 从任一节点到其每个叶子的所有路径都包含相同数目的黑色节点。

如下图是典型的红黑树：

![img](http://5b0988e595225.cdn.sohucs.com/images/20171102/eefb5a3397ef4089b356e7c9f0938a8d.jpeg)

在插入的时候，有可能就会破坏红黑树的规则，如果要继续维持红黑树的规则，我门有两种方法：**旋转和变色**

插入21，通过变色维持平衡：

- 需要注意节点25并非根节点。因为节点21和节点22连续出现了红色，不符合规则4，所以把节点22从红色变成黑色：

![img](http://5b0988e595225.cdn.sohucs.com/images/20171102/142bd79263094ec89bccb2cfd8316113.png)

凭空多出的黑色节点打破了规则5，所以发生连锁反应，需要继续把节点25从黑色变成红色：

![img](http://5b0988e595225.cdn.sohucs.com/images/20171102/3e651c84a1494495a73287df0ca92216.jpeg)

节点25和节点27又形成了两个连续的红色节点，需要继续把节点27从红色变成黑色：

![img](http://5b0988e595225.cdn.sohucs.com/images/20171102/a8c4ce5620424588bdbee69f4bb3d527.png)

旋转：

旋转分为左旋和右旋：

左旋：

![img](http://5b0988e595225.cdn.sohucs.com/images/20171102/b3cd82550b29445eac5b6e6b0f40f03c.png)

右旋：

![img](http://5b0988e595225.cdn.sohucs.com/images/20171102/c739da55ba784729919bc18b57c3a5c3.png)



![img](http://5b0988e595225.cdn.sohucs.com/images/20171102/a0c2409f6c7d4c468a3d1c80c18ebe9b.jpeg)

节点17和节点25是连续的两个红色节点，那么把节点17变成黑色节点？恐怕不合适。这样一来不但打破了规则4，而且根据规则2（根节点是黑色），也不可能把节点13变成红色节点。

变色已无法解决问题，我们把节点13看做X，把节点17看做Y，像刚才的示意图那样进行左旋转

![img](http://5b0988e595225.cdn.sohucs.com/images/20171102/9f6949f1ca624323ad26bd474912571a.jpeg)

![img](http://5b0988e595225.cdn.sohucs.com/images/20171102/d7da48b838514b33bd8b44ab1b55c9e1.jpeg)

由于根节点必须是黑色节点，所以需要变色，变色结果如下：

![img](http://5b0988e595225.cdn.sohucs.com/images/20171102/d32de019907c4e9a9c2e3490d66677de.jpeg)

因为其中两条路径(17 -> 8 -> 6 -> NIL)的黑色节点个数是4，其他路径的黑色节点个数是3，不符合规则5。

这时候我们需要把节点13看做X，节点8看做Y，像刚才的示意图那样进行右旋转：

![img](http://5b0988e595225.cdn.sohucs.com/images/20171102/1fdcb0466c7a4ecc84b54cb701781243.jpeg)

![img](http://5b0988e595225.cdn.sohucs.com/images/20171102/b3fcbe987f214340b0b03d129b2a2059.jpeg)

最后根据规则来进行变色：

![img](http://5b0988e595225.cdn.sohucs.com/images/20171102/79bbe75c48da4a7492c21af0e18065a5.jpeg)

