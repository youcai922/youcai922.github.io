#### Elasticsearch

是一个基于Apache Lucene（TM）的开源搜索引擎，使用REST接口的分布式搜索和分析引擎，可以用来实现搜索、日志统计、分析、系统监控等功能。

官方文档：https://www.elastic.co/guide/cn/elasticsearch/guide/current/index.html

#### elastic Stack（ELK）
是以elasticSearch为核心的技术栈，包括beats、Logstash、Kibana、ElasticSearch

#### Lucene

Apache的开源搜索引擎类库，提供了搜索引擎的核心API



### 核心概念

| Elasticsearch名称 | Elasticsearch概念 | 数据库 |
| ----------------- | ----------------- | ------ |
| Index             | 索引              | 库     |
| Type              | 类型              | 表     |
| Document          | 文档              | 行     |
| field             | 字段              | 列     |

- 接近实时（NRT）

  从索引一个文档知道这个文档能够被搜索到，会有一个轻微的延迟

- 集群（Cluster）

  能够由多个ElasticSearch搭建而成，他们共同持有你的整个数据，并一起提供索引和搜索功能。一个集群由唯一的名字标识，默认是“elasticsearch”。

- 节点（node）

  一个节点就是集群中的一个服务器，作为集群的一部分，它能够存储数据，参与集群的索引和搜索功能。一个节点由一个名字来标识的，默认情况下，这个名字是一个随机的漫威角色的名字，这个名字会在启动的时候赋予节点。

  一个节点可以通过配置集群名称的方式加入一个指定的集群。默认情况下，每个节点都会被安排加入到一个叫做elasticsearch的集群中，这意味着，如果你在你的网络中启动了若干个节点，并界定他们能够互相发现彼此，他们将自动的形成并加入到一个叫做“elasticsearch”的集群中。

- 索引（index）

  一个索引就是一个拥有几分相似特征的文档的集合。类似mysql中库的概念。

- 类型（type）

  在索引中，你可以定义一种或者多种类型。一个类型是你的索引的一个逻辑上的分类/分区，其语义完全由你来定。通常会为具有一组共同字段的文档定义一个类型。类似于mysql中的表的概念。

- 文档(document)

  一个文档是一个可被索引的基础信息单元。在一个index/type里面，可以存储任意多的文档。尽管一个文档，物理上存在于一个索引之中，文档必须被索引/赋予一个索引的type。文档类似于mysql中Record的概念。

- 分片和复制（shards & replicas）

  一个索引可以存储超出单个节点硬件限制的大量数据。当单个节点处理搜索请求，响应十分缓慢的时候。Elasticsearch为了解决这个问题，提供了将索引划分成多份的能力，这些份也就是分片。当你创建一个索引的时候，你可以指定你想分片的数量。每个分片本身也是一个功能完善并且独立的索引，这个索引可以被放置到集群中的任何节点上。

  分片的重要性：

  - 允许水平分割/拓展你的内容容量
  - 允许你在分片（潜在的，位于多个节点上）之上进行分布式的，并行的操作，进而提高性能/吞吐量

  在一个集群环境中，分片或者节点可能出于很多原因离线或者消失。这个情况下Elasticsearch允许你创建分片的一份或多分拷贝，这邪恶拷贝叫做复制分片，或者直接叫复制。

  复制的重要性：

  - 在分片/节点失败的情况下，提供了高可用性。
  - 拓展搜索量/吞吐量，因为所搜可以在所有复制上并行运行。

  总之，每个索引可以被分成多个分片，一个索引也可以不被复制或者复制多次。一旦复制了，每个索引就有了主分片和复制分片之别。分片和复制的数量可以在索引创建的时候指定。在索引创建之后，你可以在任何时候动态的改变复制数量，但是不能改变分片的数量。

  https://www.cnblogs.com/sunsky303/p/9438737.html



