## 浏览器插件架构

一个浏览器插件由五个部分组成：

- manifest.json：插件配置文件，配置插件的信息
- content_script：注入到浏览器页面的脚本，可以实现修改dom，获取页面元素等操作。
- browser api：插件和浏览器交互的通道，可以通过api调用浏览器的功能（存储、历史记录、通信等）

- service_worker：插件自己的后台。
- extension page：插件的各个页面，比如popup、options、devtools、sidepanel



#### manifest.json

```json
{
  // 必须的三个配置，manifest指定了浏览器插件的版本，建议选3
  "manifest_version": 3,
  "name": "插件名称",
  "version": "版本",

  // 常用
  "description": "插件描述",
  "author": "作者名",
  "background": { // 配置service worker所运行的脚本
		"service_worker": "background.js"
	},
	"options_ui": { // 配置options页面
		"page": "options.html",
		"open_in_tab": true
	},
	"content_scripts": [ // 配置content scripts，根据不同的网站，注入不同的js或者是css
		{
			"matches": [
				"*://www.baidu.com/*"
			],
			"js": [
				"test.js"
			],
			"all_frames": true,
			"css": []
		}
	],
	"web_accessible_resources": [ // 配置Web可访问资源
		{
			"matches": [
				"*://www.baidu.com/*"
			],
			"resources": [
				"test.css"
			]
		}
	],
	"host_permissions": [ // 与主机权限相关，推荐使用同样的设置
		"https://*/*"
	],
	"permissions": [ // 配置插件所使用的api权限
		"storage",
		"contextMenus",
		"cookies"
	],
	"action": { // 使用action api配置插件工具栏中图标、弹出页面等内容
		"default_icon": {
			"16": "icon16.png",
			"32": "icon32.png",
			"48": "icon48.png",
			"64": "icon64.png",
			"128": "icon128.png"
		},
		"default_popup": "popup.html",
        "icons": {
          "16": "icon16.png",
                "32": "icon32.png",
                "48": "icon48.png",
                "64": "icon64.png",
                "128": "icon128.png"
        }
	}
}
```



#### content scripts

